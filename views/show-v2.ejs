<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<style type="text/css">
	@import "compass/css3";
		div.editButton {
			position: absolute;
			top: 5px;
			right: 10px;
	}
		
	ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
		overflow: hidden;
	}

	li {
		float: left;
	}

	li a {
		display: block;
		color: white;
		text-align: center;
		padding: 16px;
		text-decoration: none;
	}
	</style>
	
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
	
	<script>
	function saveBio() {
		var text = document.getElementById("editClientBioTextArea").value;
		document.getElementById("clientBioText").innerHTML = text;
		document.getElementById("editClientBioTextArea").value="";
		document.getElementById("editButton1").click();
	}
	
	function cancelBio() {
		document.getElementById("editButton1").click();
		document.getElementById("editClientBioTextArea").value="";
	}
	function showSaveFC(no) {
		document.getElementById("save_buttonFC"+no).disabled = false;
	 }
	 
	function hideSaveFC(no) {
		document.getElementById("save_buttonFC"+no).disabled = true;
	 }
	function save_rowFC(no)
	{
		var position_val=document.getElementById("position_text"+no).value;
		var name_val=document.getElementById("name_text"+no).value;
		var duration_val=document.getElementById("duration_text"+no).value;

		document.getElementById("position_row"+no).innerHTML=position_val;
		document.getElementById("name_row"+no).innerHTML=name_val;
		document.getElementById("duration_row"+no).innerHTML=duration_val;
	}

	function delete_rowFC(no)
	{
		document.getElementById("rowFC"+no+"").outerHTML="";
	}
	
	function add_rowFC()
	{
		if (document.getElementById("newPositionFC").value !== "" || document.getElementById("newNameFC").value !== "" || document.getElementById("newDuration").value !== "") {
			var newPosition= document.getElementById("newPositionFC").value;
			var newName= document.getElementById("newNameFC").value;
			var newDuration= document.getElementById("newDuration").value;
							
			var table=document.getElementById("fidessaContacts");
			var table_len=(table.rows.length)-1;
			var row = table.insertRow(table_len).outerHTML="<tr id='rowFC"+table_len+"'><td id='position_row"+table_len+"' contenteditable='true' oninput='showSaveFC("+table_len+")'>"+newPosition+"</td><td id='name_row"+table_len+"' contenteditable='true' oninput='showSaveFC("+table_len+")'>"+newName+"</td><td id='duration_row"+table_len+"' contenteditable='true' oninput='showSaveFC("+table_len+")'>"+newDuration+"</td><td><ul><li><input type='button' id='save_buttonFC"+table_len+"' value='Save' class='save align-middle btn btn-sm btn-outline-success my-2 my-sm-0' onmousedown='save_rowFC("+table_len+")' onmouseup='hideSaveFC("+table_len+")'></li> <li><input type='button' value='Delete' class='delete align-middle btn btn-sm btn-outline-secondary my-2 my-sm-0' onclick='delete_rowFC("+table_len+")'></li></ul></td></tr>";
			document.getElementById("save_buttonFC"+table_len).disabled = true;
							 
			document.getElementById("newPositionFC").value="";
			document.getElementById("newNameFC").value="";
			document.getElementById("newDuration").value="";
			}
		document.activeElement.blur()
	}
	
	function showSaveCC(no) {
		document.getElementById("save_buttonCC"+no).disabled = false;
	 }
	 
	function hideSaveCC(no) {
		document.getElementById("save_buttonCC"+no).disabled = true;
	 }
	function save_rowCC(no)
	{
		var position_val=document.getElementById("position_text"+no).value;
		var name_val=document.getElementById("name_text"+no).value;
		var duration_val=document.getElementById("duration_text"+no).value;

		document.getElementById("position_row"+no).innerHTML=position_val;
		document.getElementById("name_row"+no).innerHTML=name_val;
		document.getElementById("duration_row"+no).innerHTML=duration_val;
	}

	function delete_rowCC(no)
	{
		document.getElementById("rowCC"+no+"").outerHTML="";
	}
	
	function add_rowCC()
	{
		if (document.getElementById("newPositionCC").value !== "" || document.getElementById("newNameCC").value !== "" || document.getElementById("newFidessaAdvocate").value !== "") {
			var newPosition= document.getElementById("newPositionCC").value;
			var newName= document.getElementById("newNameCC").value;
			var newFidessaAdvocate= document.getElementById("newFidessaAdvocate").value;
							
			var table=document.getElementById("clientContacts");
			var table_len=(table.rows.length)-1;
			var row = table.insertRow(table_len).outerHTML="<tr id='rowCC"+table_len+"'><td id='position_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newPosition+"</td><td id='name_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newName+"</td><td id='advocate_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newFidessaAdvocate+"</td><td><ul><li><input type='button' id='save_buttonCC"+table_len+"' value='Save' class='save align-middle btn btn-sm btn-outline-success my-2 my-sm-0' onmousedown='save_rowCC("+table_len+")' onmouseup='hideSaveCC("+table_len+")'></li> <li><input type='button' value='Delete' class='delete align-middle btn btn-sm btn-outline-secondary my-2 my-sm-0' onclick='delete_rowCC("+table_len+")'></li></ul></td></tr>";
			document.getElementById("save_buttonCC"+table_len).disabled = true;
							 
			document.getElementById("newPositionCC").value="";
			document.getElementById("newNameCC").value="";
			document.getElementById("newFidessaAdvocate").value="";
			}
		document.activeElement.blur()
	}
	</script>
	
    <title>JEFFERIES CRM</title>
  </head>
  <body>
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
              <a class="navbar-brand" href="#">Delivery Management</a>
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
              </button>

              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                          <li class="nav-item active">
                                    <a class="nav-link" href="#">CRM Home <span class="sr-only">(current)</span></a>
                          </li>
                          <li class="nav-item">
                                    <a class="nav-link" href="#">Edit</a>
                          </li>
                        </ul>
                        <form class="form-inline my-2 my-lg-0">
                          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
                          <button class="btn btn-outline-primary my-2 my-sm-0" type="submit">Search</button>
                        </form>
              </div>
            </nav>
  
    <!-- MPID and Address -->
    <div class="container-fluid border border-dark p-3 text-center">
      <div class="row">
        <div class="col-lg-4 col-md-4 col-sm-12">
          <h1><%= source[0].clientMnemonic %></h1>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12">
          <h1><%= source[0].clientName %></h1>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-12">
          <a href="" target="_blank"><p><%= bio[0].address %></p>
          </a>
        </div>
      </div>
    </div>

            <!-- Client Bio -->
            <div class="container-fluid border border-dark p-5 text-center">
                        <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                                <h1>Client Bio</h1>
												<div id="clientBio">
													<p id="clientBioText"><%= bio[0].clientBio %></p>
													<div class="editButton">
														<button id="editButton1" class="btn btn-sm btn-outline-secondary my-2 my-sm-0" type="button" data-toggle="collapse" data-target="#editClientBio" aria-expanded="false" aria-controls="editClientBio">
														Edit
														</button>
													</div>
													<div class="row">
														<div class="col">
															<div class="collapse multi-collapse" id="editClientBio">
																<div class="card card-body">
																	<textarea class="form-control" id="editClientBioTextArea" rows="3"></textarea>
																	<ul>
																	<li>
																	<div class="row">
																		<div class="col">
																			<button type="submit" class="btn btn-sm btn-outline-success my-2 my-sm-0" onclick='saveBio()'>Save</button>
																		</div>
																	</div>
																	</li>
																	<li>
																	<div class="row">
																		<div class="col">
																			<button type="cancel" class="btn btn-sm btn-outline-secondary my-2 my-sm-0" onclick='cancelBio()'>Cancel</button>
																		</div>
																	</div>
																	</li>
																	</ul>
																</div>
															</div>
														</div>
													</div>
												</div>
                                    </div>
                        </div>
            </div>
            
    <!-- SharePoint Information -->
    <div class="container-fluid border border-dark p-5">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
          <h1 class="text-center">Client Information</h1>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Service</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].service %></h5>
          </div>
         </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Service Line</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].serviceLine %></h5>
          </div>
         </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Sub Region</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].subRegion %></h5>
          </div>
         </div>
        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Class</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].clientClass %></h5>
          </div>
         </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Service Platform</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].servicePlatform %></h5>
          </div>
         </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Active/Inactive Date</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].goLiveDate %></h5>
          </div>
         </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
          <div class="card border-dark mb-3" >
            <div class="card-header text-center">Status</div>
            <div class="card-body">
              <h5 class="card-title text-center"><%= source[0].status %></h5>
          </div>
         </div>
        </div>
      </div>
    </div>


    <!-- Systems Information -->
    <div class="container-fluid border border-dark text-center">
                        <div class="row">
        <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
                                    <h1>Fidessa Contacts</h1>
            <table class="table table-sm table-bordered" id = "fidessaContacts">
              <thead class="thead-dark">
                <tr>
                  <th class="align-middle" scope="col">Title</th>
                  <th class="align-middle" scope="col">Name</th>
                  <th class="align-middle" scope="col">Duration</th>
                </tr>
              </thead>
              <tbody>
                <% coverage.forEach(function(data, index){%>
                <tr>
                  <th scope="row"><input type='text' id='newPositionFC' value='<%= data.position %>'></th>
                  <td><input type='text' id='newNameFC' value='<%= data.name %>'></td>
                  <td><input type='text' id='newDuration' value='<%= data.coverageStart %> - <%= data.coverageEnd %>'></td>
				  <% if (index === coverage.length - 1){ %> 
                                                  <td><ul><li><button id="addRowFC" class="add align-middle btn btn-sm btn-outline-success my-2 my-sm-0" type="submit" onclick="add_rowFC();">Add Row</button></li></ul></td>
                                                  <script>document.getElementById("addRowCC").click();</script>
                                                  <% } else { %>
                                                  <script>
                                                            var newPosition= document.getElementById("newPositionCC").value;
                                                            var newName= document.getElementById("newNameCC").value;
                                                            var newFidessaAdvocate= document.getElementById("newFidessaAdvocate").value;
                                                                                    
                                                            var table=document.getElementById("clientContacts");
                                                            var table_len=(table.rows.length)-1;
                                                            var row = table.insertRow(table_len).outerHTML="<tr id='rowCC"+table_len+"'><td id='position_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newPosition+"</td><td id='name_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newName+"</td><td id='advocate_row"+table_len+"' contenteditable='true' oninput='showSaveCC("+table_len+")'>"+newFidessaAdvocate+"</td><td><ul><li><input type='button' id='save_buttonCC"+table_len+"' value='Save' class='save align-middle btn btn-sm btn-outline-success my-2 my-sm-0' onmousedown='save_rowCC("+table_len+")' onmouseup='hideSaveCC("+table_len+")'></li> <li><input type='button' value='Delete' class='delete align-middle btn btn-sm btn-outline-danger my-2 my-sm-0' onclick='delete_rowCC("+table_len+")'></li></ul></td></tr>";
                                                            document.getElementById("save_buttonCC"+table_len).disabled = true;
                                                  </script>
                </tr>
                <% }}); %>

              </tbody>
            </table>
        </div>
        <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
          <h1>Client Contacts</h1>
          <table class="table table-sm table-bordered" id="clientContacts">
              <thead class="thead-dark">
                <tr>
                  <th class="align-middle" scope="col">Title</th>
                  <th class="align-middle" scope="col">Name</th>
                  <th class="align-middle" scope="col">Fidessa Advocate?</th>
                </tr>
              </thead>
              <tbody>
                <% client.forEach(function(data){%>
                  <tr>
                    <th scope="row"><input type='text' id='newPositionCC' value='<%= data.position %>'></th>
                    <td><input type='text' id='newNameCC' value='<%= data.name %>'></td>
                    <td><input type='text' id='newFidessaAdvocate' value='<%= data.fidessaAdvocate %>'</td>
					<td><ul><li><button id="addRowCC" class="add align-middle btn btn-sm btn-outline-success my-2 my-sm-0" type="submit" onclick="add_rowCC();">Add Row</button></li></ul></td>
					
					<script>document.getElementById("addRowCC").click();</script>
                  </tr>
                <% }); %>
              </tbody>
            </table>
        </div>
      </div>
                        <div class="row">
                                    <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
                                                <h1>Fidessa used Flows</h1>
<!--                                           <div class="list-group">
                                                            <a href="#" class="list-group-item list-group-item-action">Equities</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-primary">Principal Trading</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-secondary">Market Making</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-success">OTC Trading</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-danger">BBSS</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-warning">Fixed Income</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-info">Portfolio Trading</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-light">Algorithmic Trading</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-dark">Wealth Management</a>
                                                </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
                                                <h1>Fidessa Supported but not used Flows</h1>
                                                <div class="list-group">
                                                            <a href="#" class="list-group-item list-group-item-action">Derivatives</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-primary">Global Trading</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-secondary">Futures</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-success">Options</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-danger">SEFs and Futurizations</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-warning">Random stuff</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-info">Blah Blah</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-light">More Stuff</a>
                                                            <a href="#" class="list-group-item list-group-item-action list-group-item-dark">Even More Stuff</a>
                                                </div>
                                    </div>-->
                        </div>
                        <div class="row">
                                    <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
                                                <h1>Adjacent Systems</h1>
<!--                                           <table class="table table-sm table-bordered">
                                                  <thead class="thead-dark">
                                                            <tr>
                                                              <th class="align-middle" scope="col">System</th>
                                                              <th class="align-middle" scope="col">Workflows</th>
                                                              <th class="align-middle" scope="col">Duration</th>
                                                            </tr>
                                                  </thead>
                                                  <tbody>
                                                            <tr>
                                                              <th scope="row">Raptor</th>
                                                              <td>Order Staging</td>
                                                              <td>2011-Present</td>
                                                            </tr>
                                                            <tr>
                                                              <th scope="row">Bloomberg IOI</th>
                                                              <td>IOI and TA</td>
                                                              <td>2011-Present</td>
                                                            </tr>
                                                  </tbody>
                                                </table>-->
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-sm-12 border border-dark p-5">
                                                <h1>Non-Adjacent Systems</h1>
<!--                                           <table class="table table-sm table-bordered">
                                                  <thead class="thead-dark">
                                                            <tr>
                                                              <th class="align-middle" scope="col">System</th>
                                                              <th class="align-middle" scope="col">Workflows</th>
                                                              <th class="align-middle" scope="col">Duration</th>
                                                            </tr>
                                                  </thead>
                                                  <tbody>
                                                            <tr>
                                                              <th scope="row">Bloomberg FIT</th>
                                                              <td>Fixed Income Trading</td>
                                                              <td>2011-Present</td>
                                                            </tr>
                                                            <tr>
                                                              <th scope="row">Bloomberg Messenger</th>
                                                              <td>Communication</td>
                                                              <td>2011-Present</td>
                                                            </tr>
                                                  </tbody>
                                                </table>-->
                                    </div>
                        </div>
            </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  </body>
</html>